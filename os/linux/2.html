<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux部署wordpress环境</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="SuperSonnya">
    
    <link rel="preload" href="/assets/css/0.styles.dd55fbe0.css" as="style"><link rel="preload" href="/assets/js/app.93b6cd49.js" as="script"><link rel="preload" href="/assets/js/2.2253adde.js" as="script"><link rel="preload" href="/assets/js/58.c80522b1.js" as="script"><link rel="prefetch" href="/assets/js/10.5dec0774.js"><link rel="prefetch" href="/assets/js/11.30b58c3b.js"><link rel="prefetch" href="/assets/js/12.7df67dbb.js"><link rel="prefetch" href="/assets/js/13.9dca66f7.js"><link rel="prefetch" href="/assets/js/14.b0f40cb3.js"><link rel="prefetch" href="/assets/js/15.56f35522.js"><link rel="prefetch" href="/assets/js/16.c4926ac6.js"><link rel="prefetch" href="/assets/js/17.0c698d51.js"><link rel="prefetch" href="/assets/js/18.dbfe753c.js"><link rel="prefetch" href="/assets/js/19.7ea231de.js"><link rel="prefetch" href="/assets/js/20.7f460317.js"><link rel="prefetch" href="/assets/js/21.429f3f94.js"><link rel="prefetch" href="/assets/js/22.80cc00ff.js"><link rel="prefetch" href="/assets/js/23.a18d61ab.js"><link rel="prefetch" href="/assets/js/24.e9fd6659.js"><link rel="prefetch" href="/assets/js/25.121e9077.js"><link rel="prefetch" href="/assets/js/26.2149a157.js"><link rel="prefetch" href="/assets/js/27.be591007.js"><link rel="prefetch" href="/assets/js/28.a53ce973.js"><link rel="prefetch" href="/assets/js/29.2261a8a6.js"><link rel="prefetch" href="/assets/js/3.c4daecea.js"><link rel="prefetch" href="/assets/js/30.be11d323.js"><link rel="prefetch" href="/assets/js/31.2cf444e7.js"><link rel="prefetch" href="/assets/js/32.2b52f9fd.js"><link rel="prefetch" href="/assets/js/33.a3ba608c.js"><link rel="prefetch" href="/assets/js/34.34512653.js"><link rel="prefetch" href="/assets/js/35.f8f223fa.js"><link rel="prefetch" href="/assets/js/36.f115988c.js"><link rel="prefetch" href="/assets/js/37.4c7e6e04.js"><link rel="prefetch" href="/assets/js/38.1cdca227.js"><link rel="prefetch" href="/assets/js/39.05b091ea.js"><link rel="prefetch" href="/assets/js/4.5cbb48da.js"><link rel="prefetch" href="/assets/js/40.cc1c352c.js"><link rel="prefetch" href="/assets/js/41.1eb9a1c9.js"><link rel="prefetch" href="/assets/js/42.ee229038.js"><link rel="prefetch" href="/assets/js/43.35fddbf0.js"><link rel="prefetch" href="/assets/js/44.0ae96073.js"><link rel="prefetch" href="/assets/js/45.c74868e1.js"><link rel="prefetch" href="/assets/js/46.a35051d4.js"><link rel="prefetch" href="/assets/js/47.8ea5c2bb.js"><link rel="prefetch" href="/assets/js/48.88010d18.js"><link rel="prefetch" href="/assets/js/49.9f17e638.js"><link rel="prefetch" href="/assets/js/5.63e92375.js"><link rel="prefetch" href="/assets/js/50.69c7affc.js"><link rel="prefetch" href="/assets/js/51.df306da7.js"><link rel="prefetch" href="/assets/js/52.6652cb38.js"><link rel="prefetch" href="/assets/js/53.2f733d62.js"><link rel="prefetch" href="/assets/js/54.5a1babd6.js"><link rel="prefetch" href="/assets/js/55.f0d63b85.js"><link rel="prefetch" href="/assets/js/56.428fbcee.js"><link rel="prefetch" href="/assets/js/57.8b343c5b.js"><link rel="prefetch" href="/assets/js/59.71b9f9a3.js"><link rel="prefetch" href="/assets/js/6.6882a093.js"><link rel="prefetch" href="/assets/js/60.fa0ad234.js"><link rel="prefetch" href="/assets/js/61.da80e24e.js"><link rel="prefetch" href="/assets/js/62.176d4566.js"><link rel="prefetch" href="/assets/js/63.dba232aa.js"><link rel="prefetch" href="/assets/js/64.a3911114.js"><link rel="prefetch" href="/assets/js/65.1b266817.js"><link rel="prefetch" href="/assets/js/66.156b5867.js"><link rel="prefetch" href="/assets/js/67.5dde4306.js"><link rel="prefetch" href="/assets/js/68.482d578f.js"><link rel="prefetch" href="/assets/js/69.52471978.js"><link rel="prefetch" href="/assets/js/7.2d1feebb.js"><link rel="prefetch" href="/assets/js/70.af8e117d.js"><link rel="prefetch" href="/assets/js/71.0316cd26.js"><link rel="prefetch" href="/assets/js/72.a1dc6e07.js"><link rel="prefetch" href="/assets/js/73.55bba6f9.js"><link rel="prefetch" href="/assets/js/74.975e7923.js"><link rel="prefetch" href="/assets/js/8.f6762bec.js"><link rel="prefetch" href="/assets/js/9.ef2a9791.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dd55fbe0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="" class="logo"> <!----></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专升本" class="dropdown-title"><span class="title">专升本</span> <span class="arrow down"></span></button> <button type="button" aria-label="专升本" class="mobile-dropdown-title"><span class="title">专升本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topup/english/" class="nav-link">
  英语
</a></li><li class="dropdown-item"><!----> <a href="/topup/chinese/" class="nav-link">
  语文
</a></li><li class="dropdown-item"><!----> <a href="/topup/accountant/" class="nav-link">
  会计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle/" class="nav-link">
  Oracle
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programlangs/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/programlangs/clang/" class="nav-link">
  Clang
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/windows/" class="nav-link">
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link router-link-active">
  Linux
</a></li></ul></div></div><div class="nav-item"><a href="/virtualsofts/" class="nav-link">
  虚拟化软件
</a></div><div class="nav-item"><a href="/storage/" class="nav-link">
  存储
</a></div><div class="nav-item"><a href="/switch/" class="nav-link">
  交换机
</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">
  中间件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/langue/english/" class="nav-link">
  英语
</a></li><li class="dropdown-item"><!----> <a href="/langue/french/" class="nav-link">
  法语
</a></li></ul></div></div><div class="nav-item"><a href="/office/" class="nav-link">
  办公
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/readingnotes/books/" class="nav-link">
  读书笔记
</a></li><li class="dropdown-item"><!----> <a href="/readingnotes/others/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="专升本" class="dropdown-title"><span class="title">专升本</span> <span class="arrow down"></span></button> <button type="button" aria-label="专升本" class="mobile-dropdown-title"><span class="title">专升本</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/topup/english/" class="nav-link">
  英语
</a></li><li class="dropdown-item"><!----> <a href="/topup/chinese/" class="nav-link">
  语文
</a></li><li class="dropdown-item"><!----> <a href="/topup/accountant/" class="nav-link">
  会计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/database/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/database/oracle/" class="nav-link">
  Oracle
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programlangs/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/programlangs/clang/" class="nav-link">
  Clang
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/windows/" class="nav-link">
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/os/linux/" class="nav-link router-link-active">
  Linux
</a></li></ul></div></div><div class="nav-item"><a href="/virtualsofts/" class="nav-link">
  虚拟化软件
</a></div><div class="nav-item"><a href="/storage/" class="nav-link">
  存储
</a></div><div class="nav-item"><a href="/switch/" class="nav-link">
  交换机
</a></div><div class="nav-item"><a href="/middleware/" class="nav-link">
  中间件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="语言" class="dropdown-title"><span class="title">语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="语言" class="mobile-dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/langue/english/" class="nav-link">
  英语
</a></li><li class="dropdown-item"><!----> <a href="/langue/french/" class="nav-link">
  法语
</a></li></ul></div></div><div class="nav-item"><a href="/office/" class="nav-link">
  办公
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/readingnotes/books/" class="nav-link">
  读书笔记
</a></li><li class="dropdown-item"><!----> <a href="/readingnotes/others/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux就该这样学</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/os/linux/1.html" class="sidebar-link">1</a></li><li><a href="/os/linux/2.html" aria-current="page" class="active sidebar-link">2</a></li><li><a href="/os/linux/3.html" class="sidebar-link">3</a></li><li><a href="/os/linux/4.html" class="sidebar-link">4</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h4 id="一、源码安装nginx"><a href="#一、源码安装nginx" class="header-anchor">#</a> 一、源码安装Nginx</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># nginx官网下载nginx.tar.gz安装包</span>
<span class="token comment"># 安装依赖</span>
yum <span class="token function">install</span> -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel <span class="token punctuation">\</span>
openssl openssl-devel
<span class="token comment"># 解压</span>
<span class="token function">tar</span> -zxvf nginx.tar.gz
<span class="token builtin class-name">cd</span> nginx
<span class="token comment"># 配置</span>
./configure <span class="token punctuation">\</span>
--prefix<span class="token operator">=</span>/usr/local/nginx <span class="token punctuation">\</span>
--conf-path<span class="token operator">=</span>/usr/local/nginx/conf/nginx.conf <span class="token punctuation">\</span>
--pid-path<span class="token operator">=</span>/usr/local/nginx/conf/nginx.pid <span class="token punctuation">\</span>
--lock-path<span class="token operator">=</span>/usr/local/nginx/lock/nginx.lock
<span class="token comment"># 编译</span>
<span class="token function">make</span>
<span class="token comment"># 安装</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token comment"># 启动</span>
<span class="token builtin class-name">cd</span> /usr/local/nginx/sbin/
./nginx
<span class="token comment"># 查看进程</span>
<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> nginx
<span class="token comment"># 关闭防火墙</span>
systemctl status firewalld
systemctl stop firewalld.service
systemctl disable firewalld.service
<span class="token comment"># 错误信息</span>
<span class="token comment"># nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</span>
<span class="token builtin class-name">cd</span> /usr/local/nginx/conf/
<span class="token function">vi</span> nginx.conf <span class="token comment"># 更改server:listen端口号</span>
<span class="token comment"># 重启</span>
./nginx -s reload
<span class="token comment"># 停止</span>
<span class="token comment">## 正常关闭</span>
./nginx -s quit
<span class="token comment">## 强制关闭</span>
./nginx -s stop
<span class="token comment"># 查看nginx版本</span>
./nginx -V
<span class="token comment"># 网站代码路径</span>
/usr/local/nginx/html/
<span class="token comment"># 设置开机启动</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;/usr/local/nginx/sbin/nginx&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/rc.d/rc.local
<span class="token function">chmod</span> +x /etc/rc.d/rc.local
</code></pre></div><h4 id="二、安装php"><a href="#二、安装php" class="header-anchor">#</a> 二、安装PHP</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 官网下载php.tar.gz</span>
<span class="token comment"># 解压</span>
<span class="token function">tar</span> -zxvf php.tar.gz
<span class="token builtin class-name">cd</span> php
<span class="token comment"># 配置</span>
<span class="token comment"># ./confgure执行成功之后会在当前目录下留下config.nice 文件，后续可重新配置</span>
<span class="token comment"># 安装pcntl扩展 ./config.nice --enable-pcntl</span>
./configure --enable-fpm --prefix<span class="token operator">=</span>/usr/local/php
<span class="token comment"># 错误信息</span>
<span class="token comment">## Package requirements (sqlite3 &gt; 3.7.4) were not met:</span>
yum <span class="token function">install</span> sqlite-devel
<span class="token comment"># 编译</span>
<span class="token function">make</span>
<span class="token comment"># 安装</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token comment"># 配置时没有指定php.ini的加载位置，默认在安装php安装目录的lib目录下，移动配置文件到</span>
<span class="token comment"># /usr/local/php/lib 目录下</span>
<span class="token function">cp</span> php.ini-development /usr/local/php/lib/php.ini
<span class="token comment"># 在/usr/local/php/etc/php-fpm.conf 最后一行</span>
<span class="token comment"># include=/usr/local/php/etc/php-fpm.d/*.conf</span>
<span class="token function">cp</span> /usr/local/php/etc/php-fpm.d/www.conf.default<span class="token punctuation">\</span>
 /usr/local/php/etc/php-fpm.d/www.conf
<span class="token comment"># 文件不存在时，阻止Nginx将请求发送到后端的 PHP-FPM 模块，以避免遭受恶意脚本注入的攻击</span>
<span class="token comment">## 将 php.ini 文件中的配置项cgi.fix_pathinfo 设置为 0</span>
<span class="token comment"># 启动php-fpm</span>
/usr/local/php/sbin/php-fpm
<span class="token comment"># 修改nginx配置以支持php应用</span>
<span class="token comment">## /usr/local/nginx/conf/nginx.conf</span>
location / <span class="token punctuation">{</span>
    root   html<span class="token punctuation">;</span>
    index  index.php index.html index.htm<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment"># 保证对于.php文件的请求将被传送到后端的PHP-FP 模块</span>
location ~* <span class="token punctuation">\</span>.php$ <span class="token punctuation">{</span>
    fastcgi_index   index.php<span class="token punctuation">;</span>
    fastcgi_pass    <span class="token number">127.0</span>.0.1:9000<span class="token punctuation">;</span>
    include         fastcgi_params<span class="token punctuation">;</span>
    fastcgi_param   SCRIPT_FILENAME    <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
    fastcgi_param   SCRIPT_NAME        <span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment"># 重启nginx使配置生效</span>
<span class="token comment"># 错误信息</span>
<span class="token comment">## connect() failed (111: Connection refused) while connecting to upstream</span>
<span class="token comment">## php-fpm未启动</span>
</code></pre></div><h4 id="三、安装mysql"><a href="#三、安装mysql" class="header-anchor">#</a> 三、安装MySQL</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 下载安装包</span>
<span class="token comment"># 带boost版本的mysql-boost.tar.gz</span>
<span class="token comment"># 安装工具</span>
yum <span class="token function">install</span> cmake
yum <span class="token function">install</span> ncurses ncurses-devel
<span class="token comment"># 解压</span>
<span class="token function">tar</span> -zxvf mysql-boost.tar.gz
<span class="token builtin class-name">cd</span> mysql/
<span class="token comment"># 配置</span>
<span class="token function">mkdir</span> configure
<span class="token builtin class-name">cd</span> configure
cmake <span class="token punctuation">..</span> -DWITH_BOOST<span class="token operator">=</span><span class="token punctuation">..</span>/boost/boost_1_59_0/ -DWITH_EMBEDDED_SERVER<span class="token operator">=</span>OFF
<span class="token comment"># 编译</span>
<span class="token function">make</span>
<span class="token comment"># 安装</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token comment"># 创建mysql用户组和用户</span>
<span class="token function">groupadd</span> mysql
<span class="token function">useradd</span> -g mysql mysql
<span class="token comment"># 设置权限,安装目录为 /usr/local/mysql</span>
<span class="token function">chown</span> -R mysql:mysql /usr/local/mysql
<span class="token comment"># 初始化数据库</span>
<span class="token builtin class-name">cd</span> /usr/local/mysql/bin
./mysqld --initialize --user<span class="token operator">=</span>mysql
<span class="token comment"># warning信息</span>
<span class="token comment">## TIMESTAMP with implicit DEFAULT value is deprecated</span>
<span class="token function">vim</span> /etc/my.cnf
<span class="token assign-left variable">explicit_defaults_for_timestamp</span><span class="token operator">=</span>true
<span class="token comment"># 将mysql加入系统服务</span>
<span class="token builtin class-name">cd</span> /usr/local/mysql/support-files
<span class="token function">cp</span> mysql.server /etc/init.d/mysql
<span class="token function">chkconfig</span> --add mysql <span class="token comment"># 加入系统服务</span>
<span class="token function">chkconfig</span> mysql on <span class="token comment"># 开机启动</span>
<span class="token comment"># 开启MySQL服务</span>
<span class="token function">service</span> mysql start
<span class="token comment"># 错误信息</span>
<span class="token comment"># Starting MySQL.2018-07-30T01:14:39.000931Z mysqld_safe error: log-error </span>
<span class="token comment">## set to '/var/log/mariadb/mariadb.log', however file don't exists. Create </span>
<span class="token comment">## writable for user 'mysql'. ERROR! The server quit without updating PID </span>
<span class="token comment">## file (/var/lib/mysql/localhost.localdomain.pid).</span>
<span class="token function">mkdir</span> /var/log/mariadb
<span class="token function">touch</span> /var/log/mariadb/mariadb.log
<span class="token function">chown</span> -R mysql:mysql /var/log/mariadb/mariadb.log
<span class="token comment"># 错误信息</span>
<span class="token comment">## mysql -uroot -p 登录mysql未找到命令</span>
<span class="token function">ln</span> -s /usr/local/mysql/bin/mysql /usr/local/bin
<span class="token comment"># 错误信息</span>
<span class="token comment">## Can't connect to local MySQL server through socket /tmp/mysql.sock</span>
<span class="token function">find</span> / -name <span class="token string">'mysql.sock'</span>
<span class="token function">more</span> /etc/my.cnf
<span class="token function">ln</span> -s /var/lib/mysql/mysql.sock /tmp/mysql.sock
</code></pre></div><h4 id="四、安装php-mysql扩展"><a href="#四、安装php-mysql扩展" class="header-anchor">#</a> 四、安装<code>PHP-MySQL</code>扩展</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 安装mysqli需要PHP源码包</span>
/usr/local/bin/phpize
<span class="token comment"># 配置，需要指定php-config和mysql-config</span>
./configure -with-php-config<span class="token operator">=</span>/usr/local/bin/php-config <span class="token punctuation">\</span>
-with-pdo-mysql<span class="token operator">=</span>mysqlnd
<span class="token comment"># 错误信息，找不到文件</span>
<span class="token comment">## 直接打开报错文件，引用路径为绝对路径</span>
<span class="token comment"># 编译安装</span>
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
<span class="token comment"># 修改php.ini，去掉注释，并修改文件名</span>
<span class="token punctuation">;</span><span class="token assign-left variable">extension</span><span class="token operator">=</span>php_pdo_mysqli 
<span class="token assign-left variable">extension</span><span class="token operator">=</span>pdo_mysqli.so
<span class="token comment"># 重启php-fpm</span>
<span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> php-fpm
<span class="token function">kill</span> -USR2 端口号

<span class="token comment"># 错误信息</span>
<span class="token comment">## Cannot find autoconf. Please check your autoconf installation and the </span>
<span class="token comment">## $PHP_AUTOCONF environment variable. Then, rerun this script.</span>
yum <span class="token function">install</span> autoconf
</code></pre></div><h4 id="五、部署wordpress"><a href="#五、部署wordpress" class="header-anchor">#</a> 五、部署<code>WordPress</code></h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># wordpress文件复制到nginx路径下</span>
/usr/local/nginx/html/
<span class="token comment"># 打开localhost/wordpress开始配置</span>
<span class="token comment">## 设置数据库，用户信息</span>

<span class="token comment"># 错误信息</span>
<span class="token comment">## 1.Warning: mysqli::Can't connect to local MySQL server through socket.</span>
<span class="token comment">## 使用localhost时，MySQL客户端库使用Unix域套接字进行连接而不是TCP/IP连接。</span>
<span class="token comment">### 使用TCP/IP。连接时使用127.0.0.1代替localhost。但Unix套接字可能更快，更安全。</span>
<span class="token comment">### 更改套接字php.ini：将mysqli.default_socket设为my.cnf里MySQL创建的套接字路径。</span>
<span class="token comment">## 2.Fatal error: Uncaught Error: Call to undefined function gzinflate()</span>
<span class="token comment">## 源码编译php时没有带上zlib</span>
<span class="token builtin class-name">cd</span> /usr/local/resources/php/ext/zlib/
<span class="token function">cp</span> config0.m4 config.m4
/usr/local/php7/bin/phpize
./configure --with-php-config<span class="token operator">=</span>/usr/local/php/bin/php-config --with-zlib
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
<span class="token function">vi</span> php.ini
<span class="token assign-left variable">extension</span><span class="token operator">=</span>zlib.so
<span class="token comment"># 重启php-fpm</span>
</code></pre></div><h4 id="六、wordpress使用问题"><a href="#六、wordpress使用问题" class="header-anchor">#</a> 六、<code>WordPress使用问题</code></h4> <h5 id="_1、更新插件主题"><a href="#_1、更新插件主题" class="header-anchor">#</a> 1、更新插件主题</h5> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 添加代码</span>
define<span class="token punctuation">(</span><span class="token string">'FS_METHOD'</span>, <span class="token string">'direct'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 错误信息</span>
no working transport found
yum -y <span class="token function">install</span> libcurl-devel
<span class="token comment"># 重启php-fpm服务</span>
</code></pre></div><h5 id="_2、点击页面只显示首页"><a href="#_2、点击页面只显示首页" class="header-anchor">#</a> 2、点击页面只显示首页</h5> <ul><li>在设置里更改<code>固定链接</code>为<code>朴素</code>。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/os/linux/1.html" class="prev">
        1
      </a></span> <span class="next"><a href="/os/linux/3.html">
        3
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.93b6cd49.js" defer></script><script src="/assets/js/2.2253adde.js" defer></script><script src="/assets/js/58.c80522b1.js" defer></script>
  </body>
</html>
