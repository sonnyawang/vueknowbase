(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{419:function(_,v,t){"use strict";t.r(v);var d=t(45),e=Object(d.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h3",{attrs:{id:"_1、用户身份与能力"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、用户身份与能力"}},[_._v("#")]),_._v(" 1、用户身份与能力")]),_._v(" "),t("ul",[t("li",[_._v("管理员UID为0：系统的管理员用户。")]),_._v(" "),t("li",[_._v("系统用户UID为1～999： Linux系统为了避免因某个服务程序出现漏洞而被黑客提权至整台服务器，默认服务程序会有独立的系统用户负责运行，进而有效控制被破坏范围。")]),_._v(" "),t("li",[_._v("普通用户UID从1000开始：是由管理员创建的用于日常工作的用户。")]),_._v(" "),t("li",[_._v("在Linux系统中创建每个用户时，将自动创建一个与其同名的基本用户组，而且这个基本用户组只有该用户一个人。如果该用户以后被归纳入其他用户组，则这个其他用户组称之为扩展用户组。一个用户只有一个基本用户组，但是可以有多个扩展用户组。")])]),_._v(" "),t("h4",{attrs:{id:"_1-1、useradd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、useradd"}},[_._v("#")]),_._v(" 1.1、useradd")]),_._v(" "),t("ul",[t("li",[t("p",[t("code",[_._v("useradd [选项] 用户名")])])]),_._v(" "),t("li",[t("p",[_._v("默认的用户家目录会被存放在"),t("code",[_._v("/home")]),_._v("目录中，默认的"),t("code",[_._v("Shell")]),_._v("解释器为"),t("code",[_._v("/bin/bash")]),_._v("，而且默认会创建一个与该用户同名的基本用户组。")])]),_._v(" "),t("li",[t("p",[_._v("用户的解释器设置为"),t("code",[_._v("/sbin/nologin")]),_._v("，代表该用户不能登录到系统。")])])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("参数")]),_._v(" "),t("th",[_._v("作用")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("-d")])]),_._v(" "),t("td",[_._v("指定用户的家目录（默认为/home/username）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-e")])]),_._v(" "),t("td",[_._v("账户的到期时间，格式为YYYY-MM-DD.")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-u")])]),_._v(" "),t("td",[_._v("指定该用户的默认UID")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-g")])]),_._v(" "),t("td",[_._v("指定一个初始的用户基本组（必须已存在）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-G")])]),_._v(" "),t("td",[_._v("指定一个或多个扩展用户组")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-N")])]),_._v(" "),t("td",[_._v("不创建与用户同名的基本用户组")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-s")])]),_._v(" "),t("td",[_._v("指定该用户的默认Shell解释器")])])])]),_._v(" "),t("h4",{attrs:{id:"_1-2、groupadd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、groupadd"}},[_._v("#")]),_._v(" 1.2、groupadd")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("groupadd [选项] 群组名")])])]),_._v(" "),t("h4",{attrs:{id:"_1-3、usermod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、usermod"}},[_._v("#")]),_._v(" 1.3、usermod")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("用户的信息保存在"),t("code",[_._v("/etc/passwd")]),_._v("文件中，可以直接用文本编辑器来修改其中的用户参数项目，也可以用"),t("code",[_._v("usermod")]),_._v("命令修改已经创建的用户信息。")])]),_._v(" "),t("li",[t("p",[_._v("修改用户的属性："),t("code",[_._v("usermod [选项] 用户名")])])])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("参数")]),_._v(" "),t("th",[_._v("作用")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("-c")])]),_._v(" "),t("td",[_._v("填写用户账户的备注信息")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-d -m")])]),_._v(" "),t("td",[_._v("参数-m与参数-d连用，可重新指定用户的家目录并自动把旧的数据转移过去")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-e")])]),_._v(" "),t("td",[_._v("账户的到期时间，格式为YYYY-MM-DD")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-g")])]),_._v(" "),t("td",[_._v("变更所属用户组")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-G")])]),_._v(" "),t("td",[_._v("变更扩展用户组")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-L")])]),_._v(" "),t("td",[_._v("锁定用户禁止其登录系统")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-U")])]),_._v(" "),t("td",[_._v("解锁用户，允许其登录系统")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-s")])]),_._v(" "),t("td",[_._v("变更默认终端")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-u")])]),_._v(" "),t("td",[_._v("修改用户的UID")])])])]),_._v(" "),t("h4",{attrs:{id:"_1-4、passwd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4、passwd"}},[_._v("#")]),_._v(" 1.4、passwd")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("修改用户密码、过期时间、认证信息等："),t("code",[_._v("passwd [选项] [用户名]")])])]),_._v(" "),t("li",[t("p",[_._v("普通用户只能使用"),t("code",[_._v("passwd")]),_._v("命令修改自身的系统密码，"),t("code",[_._v("root")]),_._v("管理员则有权限修改其他所有人的密码。"),t("code",[_._v("root")]),_._v("管理员在"),t("code",[_._v("Linux")]),_._v("系统中修改自己或他人的密码时不需要验证旧密码。")])])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("参数")]),_._v(" "),t("th",[_._v("作用")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("-l")])]),_._v(" "),t("td",[_._v("锁定用户，禁止其登录")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-u")])]),_._v(" "),t("td",[_._v("解除锁定，允许用户登录")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("--stdin")])]),_._v(" "),t("td",[_._v('允许通过标准输入修改用户密码，如echo "NewPassWord" | passwd --stdin Username')])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-d")])]),_._v(" "),t("td",[_._v("使该用户可用空密码登录系统")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-e")])]),_._v(" "),t("td",[_._v("强制用户在下次登录时修改密码")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-S")])]),_._v(" "),t("td",[_._v("显示用户的密码是否被锁定，以及密码所采用的加密算法名称")])])])]),_._v(" "),t("h4",{attrs:{id:"_1-5、userdel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5、userdel"}},[_._v("#")]),_._v(" 1.5、userdel")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("userdel [选项] 用户名")])])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("参数")]),_._v(" "),t("th",[_._v("作用")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("-f")])]),_._v(" "),t("td",[_._v("强制删除用户")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-r")])]),_._v(" "),t("td",[_._v("同时删除用户及用户家目录，用户的家目录默认保留")])])])]),_._v(" "),t("h3",{attrs:{id:"_2、文件权限与归属"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、文件权限与归属"}},[_._v("#")]),_._v(" 2、文件权限与归属")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("-")]),_._v("：普通文件。")]),_._v(" "),t("li",[t("code",[_._v("d")]),_._v("：目录文件。")]),_._v(" "),t("li",[t("code",[_._v("l")]),_._v("：链接文件。")]),_._v(" "),t("li",[t("code",[_._v("b")]),_._v("：块设备文件。")]),_._v(" "),t("li",[t("code",[_._v("c")]),_._v("：字符设备文件。")]),_._v(" "),t("li",[t("code",[_._v("p")]),_._v("：管道文件。")]),_._v(" "),t("li",[_._v("对于一般文件来说，"),t("code",[_._v("可读")]),_._v("表示能够读取文件的实际内容；"),t("code",[_._v("可写")]),_._v("表示能够编辑、新增、修改、删除文件的实际内容；"),t("code",[_._v("可执行")]),_._v("则表示能够运行一个脚本程序。")]),_._v(" "),t("li",[_._v("对目录文件来说，"),t("code",[_._v("可读")]),_._v("表示能够读取目录内的文件列表；"),t("code",[_._v("可写")]),_._v("表示能够在目录内新增、删除、重命名文件；而"),t("code",[_._v("可执行")]),_._v("则表示能够进入该目录。")]),_._v(" "),t("li",[_._v("文件的读、写、执行权限可以简写为"),t("code",[_._v("rwx")]),_._v("，也可分别用数字"),t("code",[_._v("4、2、1")]),_._v("来表示，文件所有者，所属组及其他用户权限之间无关联。")])]),_._v(" "),t("h3",{attrs:{id:"_3、文件的特殊权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、文件的特殊权限"}},[_._v("#")]),_._v(" 3、文件的特殊权限")]),_._v(" "),t("ul",[t("li",[_._v("在复杂多变的生产环境中，单纯设置文件的"),t("code",[_._v("rwx")]),_._v("权限无法满足对安全和灵活性的需求，因此便有了"),t("code",[_._v("SUID")]),_._v("、"),t("code",[_._v("SGID")]),_._v("与"),t("code",[_._v("SBIT")]),_._v("的特殊权限位。这是一种对文件权限进行设置的特殊功能，可以与一般权限同时使用，以弥补一般权限不能实现的功能。")])]),_._v(" "),t("h4",{attrs:{id:"_3-1、suid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1、suid"}},[_._v("#")]),_._v(" 3.1、SUID")]),_._v(" "),t("ul",[t("li",[t("code",[_._v("SUID")]),_._v("是一种对二进制程序进行设置的特殊权限，可以让二进制程序的执行者临时拥有属主的权限（仅对拥有执行权限的二进制程序有效）。")]),_._v(" "),t("li",[t("code",[_._v("passwd")]),_._v("命令属性所有者的权限由"),t("code",[_._v("rwx")]),_._v("变成了"),t("code",[_._v("rws")]),_._v("。如果原先权限位上没有"),t("code",[_._v("x")]),_._v("执行权限，那么被赋予特殊权限后将变成大写的"),t("code",[_._v("S")]),_._v("。")])]),_._v(" "),t("h4",{attrs:{id:"_3-2、sgid"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2、sgid"}},[_._v("#")]),_._v(" 3.2、SGID")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("让执行者临时拥有属组的权限（对拥有执行权限的二进制程序进行设置）；")])]),_._v(" "),t("li",[t("p",[_._v("在某个目录中创建的文件自动继承该目录的用户组（只可以对目录进行设置）。")])]),_._v(" "),t("li",[t("p",[_._v("chmod命令是一个非常实用的命令，能够用来设置文件或目录的权限，格式为“chmod [参数] 权限 文件或目录名称”。")])]),_._v(" "),t("li",[t("p",[_._v("设置文件或目录的所有者和所属组，这里使用的命令为chown，其格式为“chown [参数] 所有者:所属组 文件或目录名称”。")])])]),_._v(" "),t("h4",{attrs:{id:"_3-3、sbit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3、sbit"}},[_._v("#")]),_._v(" 3.3、SBIT")]),_._v(" "),t("ul",[t("li",[_._v("SBIT特殊权限位可确保用户只能删除自己的文件，而不能删除其他用户的文件。当目录被设置SBIT特殊权限位后，文件的其他人权限部分的x执行权限就会被替换成t或者T，原本有x执行权限则会写成t，原本没有x执行权限则会被写成T。")])]),_._v(" "),t("h3",{attrs:{id:"_4、文件的隐藏属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、文件的隐藏属性"}},[_._v("#")]),_._v(" 4、文件的隐藏属性")]),_._v(" "),t("h4",{attrs:{id:"_4-1、chattr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1、chattr"}},[_._v("#")]),_._v(" 4.1、chattr")]),_._v(" "),t("ul",[t("li",[_._v("设置文件的隐藏权限："),t("code",[_._v("chattr [参数] 文件")]),_._v("。如果想要把某个隐藏功能添加到文件上，则需要在命令后面追加“+参数”，如果想要把某个隐藏功能移出文件，则需要追加“-参数”。")])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("参数")]),_._v(" "),t("th",[_._v("作用")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("i")])]),_._v(" "),t("td",[_._v("无法对文件进行修改；若对目录设置了该参数，则仅能修改其中的子文件内容而不能新建或删除文件")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("a")])]),_._v(" "),t("td",[_._v("仅允许补充（追加）内容，无法覆盖/删除内容（Append Only）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("S")])]),_._v(" "),t("td",[_._v("文件内容在变更后立即同步到硬盘（sync）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("s")])]),_._v(" "),t("td",[_._v("彻底从硬盘中删除，不可恢复（用0填充原文件所在硬盘区域）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("A")])]),_._v(" "),t("td",[_._v("不再修改这个文件或目录的最后访问时间（atime）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("b")])]),_._v(" "),t("td",[_._v("不再修改文件或目录的存取时间")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("D")])]),_._v(" "),t("td",[_._v("检查压缩文件中的错误")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("d")])]),_._v(" "),t("td",[_._v("使用dump命令备份时忽略本文件/目录")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("c")])]),_._v(" "),t("td",[_._v("默认将文件或目录进行压缩")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("u")])]),_._v(" "),t("td",[_._v("当删除该文件后依然保留其在硬盘中的数据，方便日后恢复")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("t")])]),_._v(" "),t("td",[_._v("让文件系统支持尾部合并（tail-merging）")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("X")])]),_._v(" "),t("td",[_._v("可以直接访问压缩文件中的内容")])])])]),_._v(" "),t("h4",{attrs:{id:"_4-2、lsattr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2、lsattr"}},[_._v("#")]),_._v(" 4.2、lsattr")]),_._v(" "),t("ul",[t("li",[_._v("用于显示文件的隐藏权限，格式为"),t("code",[_._v("lsattr [参数] 文件")]),_._v("。")])]),_._v(" "),t("h3",{attrs:{id:"_5、文件访问控制列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、文件访问控制列表"}},[_._v("#")]),_._v(" 5、文件访问控制列表")]),_._v(" "),t("ul",[t("li",[_._v("基于普通文件或目录设置"),t("code",[_._v("ACL")]),_._v("其实就是针对指定的用户或用户组设置文件或目录的操作权限。如果针对某个目录设置了"),t("code",[_._v("ACL")]),_._v("，则目录中的文件会继承其"),t("code",[_._v("ACL")]),_._v("；若针对文件设置了"),t("code",[_._v("ACL")]),_._v("，则文件不再继承其所在目录的"),t("code",[_._v("ACL")]),_._v("。")])]),_._v(" "),t("h4",{attrs:{id:"_5-1、setfacl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1、setfacl"}},[_._v("#")]),_._v(" 5.1、setfacl")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("管理文件的"),t("code",[_._v("ACL")]),_._v("规则，格式为"),t("code",[_._v("setfacl [参数] 文件名称")]),_._v("。")])]),_._v(" "),t("li",[t("p",[_._v("常用的"),t("code",[_._v("ls")]),_._v("命令看不到"),t("code",[_._v("ACL")]),_._v("表信息，但是却可以看到文件的权限最后一个点（"),t("strong",[_._v(".")]),_._v("）变成了加号（"),t("strong",[_._v("+")]),_._v("）,这就意味着该文件已经设置了ACL了。")])])]),_._v(" "),t("h4",{attrs:{id:"_5-2、getfacl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2、getfacl"}},[_._v("#")]),_._v(" 5.2、getfacl")]),_._v(" "),t("ul",[t("li",[_._v("显示文件上设置的"),t("code",[_._v("ACL")]),_._v("信息，格式为"),t("code",[_._v("getfacl 文件名称")]),_._v("。")])]),_._v(" "),t("h3",{attrs:{id:"_6、su命令与sudo服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、su命令与sudo服务"}},[_._v("#")]),_._v(" 6、su命令与sudo服务")]),_._v(" "),t("ul",[t("li",[t("p",[t("code",[_._v("su")]),_._v("命令可以使当前用户在不退出登录的情况下，切换到其他用户。"),t("code",[_._v("su")]),_._v("命令与用户名之间添加一个"),t("code",[_._v("-")]),_._v("，完全切换到新的用户，即把环境变量信息也变更为新用户的相应信息，而不是保留原始的信息。")])]),_._v(" "),t("li",[t("p",[_._v("sudo命令用于给普通用户提供额外的权限来完成原本root管理员才能完成的任务，格式为“sudo [参数] 命令名称”。")])])]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("参数")]),_._v(" "),t("th",[_._v("作用")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[t("code",[_._v("-h")])]),_._v(" "),t("td",[_._v("列出帮助信息")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-l")])]),_._v(" "),t("td",[_._v("列出当前用户可执行的命令")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-u")]),_._v("用户名或"),t("code",[_._v("UID")]),_._v("值")]),_._v(" "),t("td",[_._v("以指定的用户身份执行命令")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-k")])]),_._v(" "),t("td",[_._v("清空密码的有效时间，下次执行sudo时需要再次进行密码验证")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-b")])]),_._v(" "),t("td",[_._v("在后台执行指定的命令")])]),_._v(" "),t("tr",[t("td",[t("code",[_._v("-p")])]),_._v(" "),t("td",[_._v("更改询问密码的提示语")])])])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("每次执行"),t("code",[_._v("sudo")]),_._v("命令都要输入一次密码，可以添加"),t("code",[_._v("NOPASSWD")]),_._v("参数，使得用户执行"),t("code",[_._v("sudo")]),_._v("命令时不再需要密码验证：")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("linuxprobe ALL=NOPASSWD: /usr/sbin/poweroff\n")])])])])])])}),[],!1,null,null,null);v.default=e.exports}}]);