(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{422:function(s,n,t){"use strict";t.r(n);var a=t(45),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h4",{attrs:{id:"一、源码安装nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、源码安装nginx"}},[s._v("#")]),s._v(" 一、源码安装Nginx")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx官网下载nginx.tar.gz安装包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装依赖")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc gcc-c++ pcre pcre-devel zlib zlib-devel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nopenssl openssl-devel\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf nginx.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置")]),s._v("\n./configure "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--conf-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/conf/nginx.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--pid-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/conf/nginx.pid "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--lock-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/lock/nginx.lock\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx/sbin/\n./nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭防火墙")]),s._v("\nsystemctl status firewalld\nsystemctl stop firewalld.service\nsystemctl disable firewalld.service\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx/conf/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" nginx.conf "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改server:listen端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n./nginx -s reload\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 正常关闭")]),s._v("\n./nginx -s quit\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 强制关闭")]),s._v("\n./nginx -s stop\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看nginx版本")]),s._v("\n./nginx -V\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网站代码路径")]),s._v("\n/usr/local/nginx/html/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/nginx/sbin/nginx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/rc.d/rc.local\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /etc/rc.d/rc.local\n")])])]),t("h4",{attrs:{id:"二、安装php"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装php"}},[s._v("#")]),s._v(" 二、安装PHP")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官网下载php.tar.gz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf php.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" php\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./confgure执行成功之后会在当前目录下留下config.nice 文件，后续可重新配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装pcntl扩展 ./config.nice --enable-pcntl")]),s._v("\n./configure --enable-fpm --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/php\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Package requirements (sqlite3 > 3.7.4) were not met:")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" sqlite-devel\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置时没有指定php.ini的加载位置，默认在安装php安装目录的lib目录下，移动配置文件到")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /usr/local/php/lib 目录下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" php.ini-development /usr/local/php/lib/php.ini\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在/usr/local/php/etc/php-fpm.conf 最后一行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# include=/usr/local/php/etc/php-fpm.d/*.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/php/etc/php-fpm.d/www.conf.default"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n /usr/local/php/etc/php-fpm.d/www.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件不存在时，阻止Nginx将请求发送到后端的 PHP-FPM 模块，以避免遭受恶意脚本注入的攻击")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 将 php.ini 文件中的配置项cgi.fix_pathinfo 设置为 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动php-fpm")]),s._v("\n/usr/local/php/sbin/php-fpm\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改nginx配置以支持php应用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## /usr/local/nginx/conf/nginx.conf")]),s._v("\nlocation / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    index  index.php index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保证对于.php文件的请求将被传送到后端的PHP-FP 模块")]),s._v("\nlocation ~* "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(".php$ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    fastcgi_index   index.php"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_pass    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:9000"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    include         fastcgi_params"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_param   SCRIPT_FILENAME    "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$document_root")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fastcgi_script_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    fastcgi_param   SCRIPT_NAME        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fastcgi_script_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启nginx使配置生效")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## connect() failed (111: Connection refused) while connecting to upstream")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## php-fpm未启动")]),s._v("\n")])])]),t("h4",{attrs:{id:"三、安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、安装mysql"}},[s._v("#")]),s._v(" 三、安装MySQL")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载安装包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带boost版本的mysql-boost.tar.gz")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装工具")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" cmake\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ncurses ncurses-devel\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mysql-boost.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" mysql/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" configure\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" configure\ncmake "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" -DWITH_BOOST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/boost/boost_1_59_0/ -DWITH_EMBEDDED_SERVER"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OFF\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建mysql用户组和用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -g mysql mysql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置权限,安装目录为 /usr/local/mysql")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /usr/local/mysql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化数据库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql/bin\n./mysqld --initialize --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# warning信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## TIMESTAMP with implicit DEFAULT value is deprecated")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/my.cnf\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("explicit_defaults_for_timestamp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将mysql加入系统服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql/support-files\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" mysql.server /etc/init.d/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add mysql "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 加入系统服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" mysql on "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开机启动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启MySQL服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql start\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Starting MySQL.2018-07-30T01:14:39.000931Z mysqld_safe error: log-error ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## set to '/var/log/mariadb/mariadb.log', however file don't exists. Create ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## writable for user 'mysql'. ERROR! The server quit without updating PID ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## file (/var/lib/mysql/localhost.localdomain.pid).")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /var/log/mariadb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /var/log/mariadb/mariadb.log\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /var/log/mariadb/mariadb.log\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## mysql -uroot -p 登录mysql未找到命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/mysql/bin/mysql /usr/local/bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Can't connect to local MySQL server through socket /tmp/mysql.sock")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql.sock'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" /etc/my.cnf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /var/lib/mysql/mysql.sock /tmp/mysql.sock\n")])])]),t("h4",{attrs:{id:"四、安装php-mysql扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、安装php-mysql扩展"}},[s._v("#")]),s._v(" 四、安装"),t("code",[s._v("PHP-MySQL")]),s._v("扩展")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装mysqli需要PHP源码包")]),s._v("\n/usr/local/bin/phpize\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置，需要指定php-config和mysql-config")]),s._v("\n./configure -with-php-config"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin/php-config "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-with-pdo-mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysqlnd\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息，找不到文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 直接打开报错文件，引用路径为绝对路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译安装")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改php.ini，去掉注释，并修改文件名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("extension")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php_pdo_mysqli \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("extension")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pdo_mysqli.so\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启php-fpm")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" php-fpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -USR2 端口号\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Cannot find autoconf. Please check your autoconf installation and the ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## $PHP_AUTOCONF environment variable. Then, rerun this script.")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" autoconf\n")])])]),t("h4",{attrs:{id:"五、部署wordpress"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、部署wordpress"}},[s._v("#")]),s._v(" 五、部署"),t("code",[s._v("WordPress")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wordpress文件复制到nginx路径下")]),s._v("\n/usr/local/nginx/html/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开localhost/wordpress开始配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 设置数据库，用户信息")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 1.Warning: mysqli::Can't connect to local MySQL server through socket.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 使用localhost时，MySQL客户端库使用Unix域套接字进行连接而不是TCP/IP连接。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 使用TCP/IP。连接时使用127.0.0.1代替localhost。但Unix套接字可能更快，更安全。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 更改套接字php.ini：将mysqli.default_socket设为my.cnf里MySQL创建的套接字路径。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 2.Fatal error: Uncaught Error: Call to undefined function gzinflate()")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 源码编译php时没有带上zlib")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/resources/php/ext/zlib/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" config0.m4 config.m4\n/usr/local/php7/bin/phpize\n./configure --with-php-config"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/php/bin/php-config --with-zlib\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" php.ini\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("extension")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zlib.so\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启php-fpm")]),s._v("\n")])])]),t("h4",{attrs:{id:"六、wordpress使用问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、wordpress使用问题"}},[s._v("#")]),s._v(" 六、"),t("code",[s._v("WordPress使用问题")])]),s._v(" "),t("h5",{attrs:{id:"_1、更新插件主题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、更新插件主题"}},[s._v("#")]),s._v(" 1、更新插件主题")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加代码")]),s._v("\ndefine"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'FS_METHOD'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'direct'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 错误信息")]),s._v("\nno working transport found\nyum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libcurl-devel\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启php-fpm服务")]),s._v("\n")])])]),t("h5",{attrs:{id:"_2、点击页面只显示首页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、点击页面只显示首页"}},[s._v("#")]),s._v(" 2、点击页面只显示首页")]),s._v(" "),t("ul",[t("li",[s._v("在设置里更改"),t("code",[s._v("固定链接")]),s._v("为"),t("code",[s._v("朴素")]),s._v("。")])])])}),[],!1,null,null,null);n.default=e.exports}}]);